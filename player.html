<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Reproductor</title>
  <meta name="referrer" content="no-referrer">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  <meta http-equiv="pragma" content="no-cache">
  <script src="//ssl.p.jwpcdn.com/player/v/8.26.0/jwplayer.js"></script>
  <script>jwplayer.key = "XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo";</script>
  <style>
    html, body { margin: 0; padding: 0; background: #000; height: 100%; }
    #player { width: 100%; height: 100%; }
  </style>
</head>
<body>
  <div id="player"></div>

  <script>
    function getParameterByName(name) {
      const params = new URLSearchParams(window.location.search);
      return params.get(name) || '';
    }

    const getURL = getParameterByName('get');
    if (!getURL) {
      alert('Falta parámetro ?get=');
    }

    const decodedURL = atob(getURL);
    const number = 7; // podés hacer la lógica de selección dinámica como en tu script original

    const mpdUrl = `https://cdn.cvattv.com.ar/live/c${number}eds/${decodedURL}/SA_Live_dash_enc/${decodedURL}.mpd`;

    // 🔒 Map de claves
    const claves = {
      "VE5UX1Nwb3J0c19IRA": {
        keyId: "bc80fa3da696e503f940fde5f681a1c5",
        key: "ea46e4e9f1132e8dd71fb77f7d55058a"
      },
      "Rm94X1Nwb3J0c19QcmVtaXVuX0hE": {
        keyId: "4c230dbc7f6a4bfa6ad0aa73ff792374",
        key: "4186a7c2a15f590a9399886feaec4257"
      },
      "RVNQTjJIRA": {
        keyId: "e884b711ab111beb8a7ba1e7bcbdc9bf",
        key: "cb89ee3961599e3e648a5aad60895f34"
      }
      // Agregá más canales con sus claves...
    };

    const drm = claves[getURL];

    if (!drm) {
      document.body.innerHTML = '<h2 style="color:white;text-align:center;margin-top:40px">Clave DRM no encontrada</h2>';
    } else {
      jwplayer("player").setup({
        file: mpdUrl,
        type: "dash",
        drm: {
          clearkey: {
            keyId: drm.keyId,
            key: drm.key
          }
        },
        width: "100%",
        height: "100%",
        aspectratio: "16:9",
        autostart: true
      });
    }
  </script>
</body>
</html>
